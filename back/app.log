2024-12-09T21:08:40.454Z - getReferralTree function invoked
2024-12-09T21:08:40.458Z - Fetching referral tree for user 2 with max levels 5
2024-12-09T21:08:40.461Z - Processing level 1, user ID: 2
2024-12-09T21:08:40.464Z - SQL query for level 1: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:08:40.466Z - Query parameters for level 1: 1,2
2024-12-09T21:08:40.475Z - Referrals at level 1: [{"user_id":3,"username":"Jane e"}]
2024-12-09T21:08:40.478Z - Referrals processed for level 1
2024-12-09T21:08:40.481Z - Processing level 2, user ID: 2
2024-12-09T21:08:40.484Z - SQL query for level 2: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:08:40.486Z - Query parameters for level 2: 2,2
2024-12-09T21:08:40.491Z - Referrals at level 2: [{"user_id":4,"username":"Jane e"}]
2024-12-09T21:08:40.494Z - Referrals processed for level 2
2024-12-09T21:08:40.497Z - Processing level 3, user ID: 2
2024-12-09T21:08:40.499Z - SQL query for level 3: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:08:40.502Z - Query parameters for level 3: 3,2
2024-12-09T21:08:40.506Z - Referrals at level 3: []
2024-12-09T21:08:40.509Z - No referrals found at level 3, exiting loop.
2024-12-09T21:08:40.512Z - Final referral tree: [{"level":1,"referrals":[{"user_id":3,"username":"Jane e"}]},{"level":2,"referrals":[{"user_id":4,"username":"Jane e"}]}]
2024-12-09T21:09:30.258Z - getReferralTree function invoked
2024-12-09T21:09:30.262Z - Fetching referral tree for user 2 with max levels 5
2024-12-09T21:09:30.267Z - Processing level 1, user ID: 2
2024-12-09T21:09:30.271Z - SQL query for level 1: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:09:30.276Z - Query parameters for level 1: 1,2
2024-12-09T21:09:30.285Z - getReferralTree function invoked
2024-12-09T21:09:30.289Z - Fetching referral tree for user 2 with max levels 5
2024-12-09T21:09:30.293Z - Processing level 1, user ID: 2
2024-12-09T21:09:30.297Z - SQL query for level 1: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:09:30.302Z - Query parameters for level 1: 1,2
2024-12-09T21:09:30.309Z - Referrals at level 1: [{"user_id":3,"username":"Jane e"}]
2024-12-09T21:09:30.312Z - Referrals processed for level 1
2024-12-09T21:09:30.316Z - Processing level 2, user ID: 2
2024-12-09T21:09:30.319Z - SQL query for level 2: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:09:30.323Z - Query parameters for level 2: 2,2
2024-12-09T21:09:30.328Z - Referrals at level 2: [{"user_id":4,"username":"Jane e"}]
2024-12-09T21:09:30.331Z - Referrals processed for level 2
2024-12-09T21:09:30.335Z - Processing level 3, user ID: 2
2024-12-09T21:09:30.338Z - SQL query for level 3: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:09:30.342Z - Query parameters for level 3: 3,2
2024-12-09T21:09:30.349Z - Referrals at level 3: []
2024-12-09T21:09:30.353Z - No referrals found at level 3, exiting loop.
2024-12-09T21:09:30.357Z - Final referral tree: [{"level":1,"referrals":[{"user_id":3,"username":"Jane e"}]},{"level":2,"referrals":[{"user_id":4,"username":"Jane e"}]}]
2024-12-09T21:09:30.366Z - Referrals at level 1: [{"user_id":3,"username":"Jane e"}]
2024-12-09T21:09:30.373Z - Referrals processed for level 1
2024-12-09T21:09:30.380Z - Processing level 2, user ID: 2
2024-12-09T21:09:30.385Z - SQL query for level 2: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:09:30.388Z - Query parameters for level 2: 2,2
2024-12-09T21:09:30.395Z - Referrals at level 2: [{"user_id":4,"username":"Jane e"}]
2024-12-09T21:09:30.399Z - Referrals processed for level 2
2024-12-09T21:09:30.402Z - Processing level 3, user ID: 2
2024-12-09T21:09:30.405Z - SQL query for level 3: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:09:30.410Z - Query parameters for level 3: 3,2
2024-12-09T21:09:30.416Z - Referrals at level 3: []
2024-12-09T21:09:30.420Z - No referrals found at level 3, exiting loop.
2024-12-09T21:09:30.423Z - Final referral tree: [{"level":1,"referrals":[{"user_id":3,"username":"Jane e"}]},{"level":2,"referrals":[{"user_id":4,"username":"Jane e"}]}]
2024-12-09T21:11:21.293Z - getReferralTree function invoked
2024-12-09T21:11:21.297Z - Fetching referral tree for user 3 with max levels 5
2024-12-09T21:11:21.305Z - Processing level 1, user ID: 3
2024-12-09T21:11:21.310Z - SQL query for level 1: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:11:21.314Z - Query parameters for level 1: 1,3
2024-12-09T21:11:21.323Z - getReferralTree function invoked
2024-12-09T21:11:21.327Z - Fetching referral tree for user 3 with max levels 5
2024-12-09T21:11:21.331Z - Processing level 1, user ID: 3
2024-12-09T21:11:21.335Z - SQL query for level 1: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:11:21.339Z - Query parameters for level 1: 1,3
2024-12-09T21:11:21.344Z - Referrals at level 1: [{"user_id":4,"username":"Jane e"}]
2024-12-09T21:11:21.348Z - Referrals processed for level 1
2024-12-09T21:11:21.352Z - Processing level 2, user ID: 3
2024-12-09T21:11:21.355Z - SQL query for level 2: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:11:21.358Z - Query parameters for level 2: 2,3
2024-12-09T21:11:21.362Z - Referrals at level 1: [{"user_id":4,"username":"Jane e"}]
2024-12-09T21:11:21.366Z - Referrals processed for level 1
2024-12-09T21:11:21.369Z - Processing level 2, user ID: 3
2024-12-09T21:11:21.372Z - SQL query for level 2: 
                SELECT al.referred_id AS user_id, u.name AS username
                FROM affiliate_levels al
                JOIN users u ON al.referred_id = u.id
                WHERE al.level = ?
                AND al.user_id = ?
            
2024-12-09T21:11:21.376Z - Query parameters for level 2: 2,3
2024-12-09T21:11:21.379Z - Referrals at level 2: []
2024-12-09T21:11:21.386Z - No referrals found at level 2, exiting loop.
2024-12-09T21:11:21.390Z - Final referral tree: [{"level":1,"referrals":[{"user_id":4,"username":"Jane e"}]}]
2024-12-09T21:11:21.395Z - Referrals at level 2: []
2024-12-09T21:11:21.403Z - No referrals found at level 2, exiting loop.
2024-12-09T21:11:21.406Z - Final referral tree: [{"level":1,"referrals":[{"user_id":4,"username":"Jane e"}]}]
